(this["webpackJsonppizza-react-redux"]=this["webpackJsonppizza-react-redux"]||[]).push([[5],{104:function(e,r,t){},113:function(e,r,t){"use strict";t.r(r);var i=t(23),a=t(2),n=t(28),s=t(15),c=t(16),o=t(19),l=t(18),d=t(1),u=t.n(d),p=(t(104),t(17)),m=t(14),h=t(5),j=t(6),z=t(7),b=t(90),O=t(92),f=t(32),v=t(94),x=t(0),g=function(e){Object(o.a)(t,e);var r=Object(l.a)(t);function t(){var e;Object(s.a)(this,t);for(var c=arguments.length,o=new Array(c),l=0;l<c;l++)o[l]=arguments[l];return(e=r.call.apply(r,[this].concat(o))).state={modalOpen:!1,currentPizzaSizes:[],currentPizzaPrices:[],totalPrice:0,orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Name"},validation:{required:!0},touched:!1,value:""},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Street"},validation:{required:!0},touched:!1,value:""},phone:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Phone Number"},validation:{required:!0},touched:!1,value:""}},formIsValid:!1},e.pizzaSizeChangedHandler=function(r,t){var i=Object(n.a)(e.state.currentPizzaPrices),a=Object(n.a)(e.state.currentPizzaSizes);"32"===r.target.value?(i[t]=e.props.orderStore[t].prices[0].price,a[t]=e.props.orderStore[t].prices[0].size):"42"===r.target.value?(i[t]=e.props.orderStore[t].prices[1].price,a[t]=e.props.orderStore[t].prices[1].size):"50"===r.target.value&&(i[t]=e.props.orderStore[t].prices[2].price,a[t]=e.props.orderStore[t].prices[2].size);var s=i.reduce((function(e,r){return e+r}),0);e.setState({currentPizzaPrices:i,totalPrice:s})},e.removePizzaFromOrderStoreHandler=function(r,t){e.props.onRemovePizzaFromOrderStore(r);var i=Object(n.a)(e.state.currentPizzaPrices),a=i.find((function(e,r){return r===t})),s=i.filter((function(e,r){return r!==t}));e.setState((function(e){return{totalPrice:e.totalPrice-a,currentPizzaPrices:s}}))},e.checkInputValidity=function(e,r){var t=!0;if(e.required&&(t=""!==r.trim()&&t),e.minLength&&(t=r.length>=e.minLength&&t),e.isEmail){t=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(r)&&t}return t},e.inputChangedHandler=function(r,t){var n=Object(a.a)(Object(a.a)({},e.state.orderForm),{},Object(i.a)({},t,Object(a.a)(Object(a.a)({},e.state.orderForm[t]),{},{touched:!0,value:r.target.value,valid:e.checkInputValidity(e.state.orderForm[t].validation,r.target.value)}))),s=!0;for(var c in n)s=n[c].valid&&s;e.setState({orderForm:n,formIsValid:s})},e.formSubmitHandler=function(r){r.preventDefault(),e.props.isAuthenticated?e.setState({modalOpen:!0}):e.props.history.replace("/sign-up")},e.closeModalHandler=function(){e.setState({modalOpen:!1})},e.orderPizzasHandler=function(){var r={pizzas:{}};e.props.orderStore.forEach((function(t,i){r.pizzas[t.name]={name:t.name,size:e.state.currentPizzaSizes[i],price:e.state.currentPizzaPrices[i]}})),r.customerInfo={name:e.state.orderForm.name.value,street:e.state.orderForm.street.value,phone:e.state.orderForm.phone.value},r.totalPrice=e.state.totalPrice,e.props.onOrderPizzas(r),e.closeModalHandler()},e}return Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.orderStore.map((function(e){return e.prices[0].price})),r=this.props.orderStore.map((function(e){return e.prices[0].size})),t=e.reduce((function(e,r){return e+r}),0);this.setState({currentPizzaPrices:e,currentPizzaSizes:r,totalPrice:t})}},{key:"render",value:function(){var e=this,r=null;0===this.props.orderStore.length&&(r=Object(x.jsx)(h.a,{to:"/"}));var t=Object(x.jsx)("p",{children:"No orders yet"});this.props.orderStore.length>0&&(t=this.props.orderStore.map((function(r,t){return Object(x.jsxs)("div",{className:"pizza-display",children:[Object(x.jsx)("div",{className:"pizza-display__remove",onClick:function(){return e.removePizzaFromOrderStoreHandler(r,t)},children:Object(x.jsx)(z.e,{})}),Object(x.jsx)("div",{className:"pizza-display__img",children:Object(x.jsx)("img",{src:r.imageUrl,alt:r.name})}),Object(x.jsx)("p",{className:"pizza-display__name",children:r.name}),Object(x.jsxs)("div",{className:"pizza-display__flex",children:[Object(x.jsxs)("div",{className:"pizza-display__info",children:[Object(x.jsx)("p",{className:"pizza-display__ing-title",children:"ingredients:"}),Object(x.jsx)("ul",{className:"pizza-display__ingredients",children:r.ingredients.map((function(e,r){return Object(x.jsx)("li",{className:"pizza-display__ing",children:e},r)}))})]}),Object(x.jsxs)("div",{className:"pizza-display__pricing",children:[Object(x.jsx)("label",{htmlFor:"size",children:"pizza size:"}),Object(x.jsx)("select",{name:"size",id:"size",onChange:function(r){return e.pizzaSizeChangedHandler(r,t)},children:r.prices.map((function(e){return Object(x.jsx)("option",{value:e.size,children:e.size},e.size)}))}),Object(x.jsxs)("p",{className:"pizza-display__price-text",children:["pizza price: $",Object(x.jsx)("span",{className:"price",children:e.state.currentPizzaPrices[t]})]})]})]})]},r.id)})));var i=[];for(var a in this.state.orderForm)i.push({id:a,details:this.state.orderForm[a]});var n=i.map((function(r){return Object(x.jsx)(O.a,{elementType:r.details.elementType,elementConfig:r.details.elementConfig,value:r.details.value,touched:r.details.touched,validationRequired:r.details.validation,valid:r.details.valid,inputChanged:function(t){return e.inputChangedHandler(t,r.id)}},r.id)}));return this.props.isAuthenticated||(n=null),Object(x.jsxs)(u.a.Fragment,{children:[r,Object(x.jsx)(v.a,{errorShow:this.props.error,errorClicked:this.props.onOrderClearError,children:"Order failed. Try again later, or order directly via phone."}),Object(x.jsx)("div",{className:"order__finished",style:{display:this.props.orderSuccess?"block":"none"},children:"Your order have been successfull! See you in no time!"}),Object(x.jsxs)(f.a,{modalOpen:this.state.modalOpen,closeModal:this.closeModalHandler,cancelled:this.closeModalHandler,continued:this.orderPizzasHandler,children:[Object(x.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"You ordered:"}),Object(x.jsx)("ol",{style:{textAlign:"left",padding:"0 1rem"},children:this.props.orderStore.map((function(r,t){return Object(x.jsxs)("li",{style:{marginBottom:"1rem"},children:[Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{style:{fontWeight:"bold"},children:"Pizza name: "}),Object(x.jsx)("span",{style:{textTransform:"capitalize"},children:r.name})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{style:{fontWeight:"bold"},children:"size: "}),Object(x.jsxs)("span",{children:[e.state.currentPizzaSizes[t],"cm"]})]}),Object(x.jsxs)("p",{children:[Object(x.jsx)("span",{style:{fontWeight:"bold"},children:"price: "}),Object(x.jsxs)("span",{children:["$",e.state.currentPizzaPrices[t]]})]})]},r.id)}))}),Object(x.jsxs)("p",{children:["Total price: $",this.state.totalPrice]})]}),Object(x.jsx)("h1",{className:"order__title",children:"order your pizza"}),Object(x.jsxs)("section",{className:"order__content",children:[Object(x.jsx)("h3",{className:"order__pizza-title",children:"ready to order:"}),Object(x.jsxs)("article",{className:"order__pizza",children:[Object(x.jsx)("div",{className:"order__pizza-pizza",children:t}),Object(x.jsxs)("p",{className:"order__total-price",children:["Total Price: $",Object(x.jsx)("span",{children:this.state.totalPrice})]}),Object(x.jsx)("div",{className:"order__more",children:Object(x.jsx)(j.b,{to:"/pizza-types",children:"order more pizzas"})}),Object(x.jsxs)("div",{className:"order__form",children:[Object(x.jsx)("h4",{className:"order__form-title",children:"enter your order info"}),Object(x.jsx)(b.a,{formCustomClassname:"order",formButtonText:this.props.isAuthenticated?"order now":"sign up to order",submitBtnDisabled:null===n||this.state.formIsValid,submitForm:this.formSubmitHandler,children:n})]})]})]})]})}}]),t}(d.Component);r.default=Object(p.b)((function(e){return{pizzaTypes:e.pizzaTypes.pizzaTypes,orderStore:e.pizzaTypes.orderStore,isAuthenticated:null!==e.authenticate.token,orderSuccess:e.pizzaTypes.orderSuccess,error:e.pizzaTypes.error}}),(function(e){return{onRemovePizzaFromOrderStore:function(r){return e(m.v(r))},onOrderPizzas:function(r){return e(m.s(r))},onOrderClearError:function(){return e(m.t())}}}))(g)},90:function(e,r,t){"use strict";t(1),t(91);var i=t(0);r.a=function(e){return Object(i.jsxs)("form",{className:"form form__".concat(e.formCustomClassname),onSubmit:e.submitForm,children:[e.children,Object(i.jsx)("button",{className:"form__button",disabled:!e.submitBtnDisabled,children:e.formButtonText})]})}},91:function(e,r,t){},92:function(e,r,t){"use strict";var i=t(2),a=(t(1),t(93),t(0));r.a=function(e){var r=null,t=["form-input"];switch(e.validationRequired&&e.touched&&!e.valid&&t.push("input-invalid"),e.valid&&t.push("input-valid"),e.elementType){case"input":r=Object(a.jsx)("input",Object(i.a)(Object(i.a)({className:t.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;case"select":r=Object(a.jsx)("select",{value:e.value,className:t.join(" "),name:e.elementConfig.name,onChange:e.inputChanged,children:e.elementConfig.options.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.displayedValue},e.value)}))});break;case"textarea":r=Object(a.jsx)("textarea",Object(i.a)(Object(i.a)({className:t.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;default:r=Object(a.jsx)("input",{})}return Object(a.jsxs)("div",{className:"input-container",children:[e.label?Object(a.jsx)("label",{className:"input-label",children:e.label}):null,r]})}},93:function(e,r,t){},94:function(e,r,t){"use strict";t(1),t(95);var i=t(0);r.a=function(e){return Object(i.jsxs)("div",{className:e.errorShow?"error-modal error-show":"error-modal",children:[Object(i.jsx)("p",{className:"error-modal__text",children:e.children}),Object(i.jsx)("button",{className:"error-modal__btn",onClick:e.errorClicked,children:"OK"})]})}},95:function(e,r,t){}}]);
//# sourceMappingURL=5.4c191374.chunk.js.map