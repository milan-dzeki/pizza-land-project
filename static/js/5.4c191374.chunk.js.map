{"version":3,"sources":["pages/Order/Order.js","components/UI/Form/Form.js","components/UI/Input/Input.js","components/UI/ErrorModal/ErrorModal.js"],"names":["Order","state","modalOpen","currentPizzaSizes","currentPizzaPrices","totalPrice","orderForm","name","elementType","elementConfig","type","placeholder","validation","required","touched","value","street","phone","formIsValid","pizzaSizeChangedHandler","event","pizzaIndex","pizzaPrices","pizzaSizes","target","props","orderStore","prices","price","size","newTotalPrice","reduce","sum","el","setState","removePizzaFromOrderStoreHandler","pizza","onRemovePizzaFromOrderStore","currentPizzaPricesCopy","deletedPizzaPrice","find","index","newCurrentPizzaPrices","filter","prevState","checkInputValidity","rules","isValid","trim","minLength","length","isEmail","test","inputChangedHandler","inputIdentifier","updatedOrderForm","valid","formValid","formSubmitHandler","preventDefault","isAuthenticated","history","replace","closeModalHandler","orderPizzasHandler","orderData","pizzas","forEach","customerInfo","onOrderPizzas","initialPizzaPrices","this","map","initialPizzaSizes","currentTotalPrice","redirect","to","className","onClick","src","imageUrl","alt","ingredients","ing","htmlFor","id","onChange","formInputs","key","push","details","inputsDisplayed","formElement","validationRequired","inputChanged","Fragment","errorShow","error","errorClicked","onOrderClearError","style","display","orderSuccess","closeModal","cancelled","continued","marginBottom","textAlign","padding","order","fontWeight","textTransform","formCustomClassname","formButtonText","submitBtnDisabled","submitForm","Component","connect","pizzaTypes","authenticate","token","dispatch","actions","form","onSubmit","children","disabled","input","inputClasses","join","options","option","displayedValue","label","errorModal"],"mappings":"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","file":"static/js/5.4c191374.chunk.js","sourcesContent":["import React, { Component } from 'react';\r\nimport './order.scss';\r\nimport { connect } from 'react-redux';\r\nimport * as actions from '../../store/actions/index';\r\nimport { Redirect } from 'react-router-dom';\r\nimport { Link } from 'react-router-dom';\r\nimport { FaTimes } from 'react-icons/fa';\r\nimport Form from '../../components/UI/Form/Form';\r\nimport Input from '../../components/UI/Input/Input';\r\nimport Modal from '../../components/UI/Modal/Modal';\r\nimport ErrorModal from '../../components/UI/ErrorModal/ErrorModal';\r\n\r\nclass Order extends Component {\r\n  state = {\r\n    modalOpen: false,\r\n    currentPizzaSizes: [],\r\n    currentPizzaPrices: [],\r\n    totalPrice: 0,\r\n    orderForm: {\r\n      name: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Name\"\r\n        },\r\n        validation: {\r\n          required: true\r\n        },\r\n        touched: false,\r\n        value: \"\"\r\n      },\r\n      street: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Street\"\r\n        },\r\n        validation: {\r\n          required: true\r\n        },\r\n        touched: false,\r\n        value: \"\"\r\n      },\r\n      phone: {\r\n        elementType: \"input\",\r\n        elementConfig: {\r\n          type: \"text\",\r\n          placeholder: \"Your Phone Number\"\r\n        },\r\n        validation: {\r\n          required: true\r\n        },\r\n        touched: false,\r\n        value: \"\"\r\n      },\r\n    },\r\n    formIsValid: false\r\n  }\r\n  componentDidMount() {\r\n    let initialPizzaPrices = this.props.orderStore.map(pizza => pizza.prices[0].price);\r\n\r\n    let initialPizzaSizes = this.props.orderStore.map(pizza => pizza.prices[0].size)\r\n\r\n    let currentTotalPrice = initialPizzaPrices.reduce((sum, el) => {\r\n      return sum + el;\r\n    }, 0);\r\n\r\n    this.setState({\r\n      currentPizzaPrices: initialPizzaPrices,\r\n      currentPizzaSizes: initialPizzaSizes,\r\n      totalPrice: currentTotalPrice\r\n    });\r\n  }\r\n  pizzaSizeChangedHandler = (event, pizzaIndex) => {\r\n    const pizzaPrices = [\r\n      ...this.state.currentPizzaPrices\r\n    ];\r\n    const pizzaSizes = [\r\n      ...this.state.currentPizzaSizes\r\n    ]\r\n    if(event.target.value === \"32\") {\r\n      pizzaPrices[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[0].price;\r\n      pizzaSizes[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[0].size;\r\n    } else if(event.target.value === \"42\") {\r\n      pizzaPrices[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[1].price;\r\n      pizzaSizes[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[1].size;\r\n    } else if(event.target.value === \"50\") {\r\n      pizzaPrices[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[2].price;\r\n      pizzaSizes[pizzaIndex] = this.props.orderStore[pizzaIndex].prices[2].size;\r\n    }\r\n\r\n    let newTotalPrice = pizzaPrices.reduce((sum, el) => {\r\n      return sum + el;\r\n    }, 0);\r\n\r\n    this.setState({\r\n      currentPizzaPrices: pizzaPrices,\r\n      totalPrice: newTotalPrice\r\n    })\r\n  }\r\n  removePizzaFromOrderStoreHandler = (pizza, pizzaIndex) => {\r\n    this.props.onRemovePizzaFromOrderStore(pizza);\r\n\r\n    const currentPizzaPricesCopy = [\r\n      ...this.state.currentPizzaPrices\r\n    ];\r\n    \r\n    let deletedPizzaPrice = currentPizzaPricesCopy.find((price, index) => index === pizzaIndex);\r\n\r\n    const newCurrentPizzaPrices = currentPizzaPricesCopy.filter((pizza, index) => index !== pizzaIndex);\r\n    this.setState(prevState => {\r\n      return {\r\n        totalPrice: prevState.totalPrice - deletedPizzaPrice,\r\n        currentPizzaPrices: newCurrentPizzaPrices\r\n      }\r\n    })\r\n  }\r\n  checkInputValidity = (rules, value) => {\r\n    let isValid = true;\r\n\r\n    if(rules.required) {\r\n      isValid = value.trim() !== \"\" && isValid;\r\n    }\r\n    if(rules.minLength) {\r\n      isValid = value.length >= rules.minLength && isValid;\r\n    }\r\n    if(rules.isEmail) {\r\n      const pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;\r\n      isValid = pattern.test(value) && isValid\r\n    }\r\n    return isValid;\r\n  }\r\n  inputChangedHandler = (event, inputIdentifier) => {\r\n    const updatedOrderForm = {\r\n      ...this.state.orderForm,\r\n      [inputIdentifier]: {\r\n        ...this.state.orderForm[inputIdentifier],\r\n        touched: true,\r\n        value: event.target.value,\r\n        valid: this.checkInputValidity(this.state.orderForm[inputIdentifier].validation, event.target.value)\r\n      }\r\n    };\r\n\r\n    let formValid = true;\r\n    for(const inputIdentifier in updatedOrderForm) {\r\n      formValid = updatedOrderForm[inputIdentifier].valid && formValid;\r\n    }\r\n\r\n    this.setState({\r\n      orderForm: updatedOrderForm,\r\n      formIsValid: formValid\r\n    })\r\n  }\r\n  formSubmitHandler = (event) => {\r\n    event.preventDefault();\r\n    if(this.props.isAuthenticated) {\r\n      this.setState({modalOpen: true})\r\n    } else {\r\n      this.props.history.replace(\"/sign-up\");\r\n    }\r\n  }\r\n  closeModalHandler = () => {\r\n    this.setState({modalOpen: false})\r\n  }\r\n  orderPizzasHandler = () => {\r\n    const orderData = {\r\n      pizzas: {}\r\n    };\r\n    this.props.orderStore.forEach((pizza, index) => {\r\n      orderData.pizzas[pizza.name] = {\r\n        name: pizza.name,\r\n        size: this.state.currentPizzaSizes[index],\r\n        price: this.state.currentPizzaPrices[index]\r\n      }\r\n    });\r\n\r\n    orderData.customerInfo = {\r\n      name: this.state.orderForm.name.value,\r\n      street: this.state.orderForm.street.value,\r\n      phone: this.state.orderForm.phone.value\r\n    }\r\n\r\n    orderData.totalPrice = this.state.totalPrice;\r\n\r\n    this.props.onOrderPizzas(orderData);\r\n\r\n    this.closeModalHandler();\r\n  }\r\n  render() {\r\n    let redirect = null;\r\n    if(this.props.orderStore.length === 0) {\r\n      redirect = <Redirect to=\"/\"/>\r\n    }\r\n    let pizzas = <p>No orders yet</p>;\r\n    if(this.props.orderStore.length > 0) {\r\n      pizzas = this.props.orderStore.map((pizza, pizzaIndex) => {\r\n        return (\r\n          <div key={pizza.id} className=\"pizza-display\">\r\n            <div \r\n              className=\"pizza-display__remove\"\r\n              onClick={() => this.removePizzaFromOrderStoreHandler(pizza, pizzaIndex)}\r\n              >\r\n              <FaTimes />\r\n            </div>\r\n            <div className=\"pizza-display__img\">\r\n              <img src={pizza.imageUrl} alt={pizza.name}/>\r\n            </div>\r\n            <p className=\"pizza-display__name\">\r\n              {pizza.name}\r\n            </p>\r\n            <div className=\"pizza-display__flex\">\r\n              <div className=\"pizza-display__info\">\r\n                <p className=\"pizza-display__ing-title\">\r\n                  ingredients:\r\n                </p>\r\n                <ul className=\"pizza-display__ingredients\">\r\n                  {pizza.ingredients.map((ing, index) => (\r\n                  <li\r\n                    key={index}\r\n                    className=\"pizza-display__ing\">\r\n                    {ing}\r\n                  </li>\r\n                  ))}\r\n                </ul>\r\n              </div>\r\n              <div className=\"pizza-display__pricing\">\r\n                <label htmlFor=\"size\">\r\n                  pizza size:\r\n                </label>\r\n                <select name=\"size\" id=\"size\" onChange={(event) => this.pizzaSizeChangedHandler(event, pizzaIndex)}>\r\n                  {pizza.prices.map(size => (\r\n                    <option \r\n                      key={size.size}\r\n                      value={size.size}>\r\n                      {size.size}\r\n                    </option>\r\n                  ))}\r\n                </select>\r\n                <p className=\"pizza-display__price-text\">\r\n                  pizza price: $<span className=\"price\">{this.state.currentPizzaPrices[pizzaIndex]}</span>\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        );\r\n      }\r\n    )}\r\n\r\n    let formInputs = [];\r\n    for(const key in this.state.orderForm) {\r\n      formInputs.push({\r\n        id: key,\r\n        details: this.state.orderForm[key]\r\n      });\r\n    }\r\n\r\n    let inputsDisplayed = formInputs.map(formElement => {\r\n      return <Input\r\n            key={formElement.id}\r\n            elementType={formElement.details.elementType}\r\n            elementConfig={formElement.details.elementConfig}\r\n            value={formElement.details.value}\r\n            touched={formElement.details.touched}\r\n            validationRequired={formElement.details.validation}\r\n            valid={formElement.details.valid}\r\n            inputChanged={event => this.inputChangedHandler(event, formElement.id)} />\r\n    });\r\n\r\n    if(!this.props.isAuthenticated) {\r\n      inputsDisplayed = null;\r\n    }\r\n\r\n    return (\r\n      <React.Fragment>\r\n        {redirect}\r\n        <ErrorModal\r\n          errorShow={this.props.error}\r\n          errorClicked={this.props.onOrderClearError}>\r\n            Order failed. Try again later, or order directly via phone.\r\n        </ErrorModal>\r\n        <div \r\n          className=\"order__finished\"\r\n          style={{\r\n            display: this.props.orderSuccess ? \"block\" : \"none\"\r\n          }}>\r\n          Your order have been successfull! See you in no time!\r\n        </div>\r\n        <Modal\r\n          modalOpen={this.state.modalOpen}\r\n          closeModal={this.closeModalHandler}\r\n          cancelled={this.closeModalHandler}\r\n          continued={this.orderPizzasHandler}\r\n          >\r\n          <h2 style={{\r\n            marginBottom: \"1.5rem\"\r\n          }}>You ordered:</h2>\r\n          <ol style={{\r\n            textAlign: \"left\",\r\n            padding: \"0 1rem\"\r\n          }}>\r\n            {this.props.orderStore.map((order, index) => (\r\n              <li\r\n                key={order.id}\r\n                style={{marginBottom: \"1rem\"}}\r\n                >\r\n                <p>\r\n                  <span style={{fontWeight: \"bold\"}}>Pizza name: </span>\r\n                  <span style={{textTransform: \"capitalize\"}}>{order.name}</span>\r\n                </p>\r\n                <p>\r\n                  <span style={{fontWeight: \"bold\"}}>size: </span>\r\n                  <span>{this.state.currentPizzaSizes[index]}cm</span>\r\n                </p>\r\n                <p>\r\n                  <span style={{fontWeight: \"bold\"}}>price: </span>\r\n                  <span>\r\n                    ${this.state.currentPizzaPrices[index]}\r\n                  </span>\r\n                </p>\r\n              </li>\r\n            ))}\r\n          </ol>\r\n          <p>Total price: ${this.state.totalPrice}</p>\r\n        </Modal>\r\n        <h1 className=\"order__title\">\r\n          order your pizza\r\n        </h1>\r\n        <section className=\"order__content\">\r\n          <h3 className=\"order__pizza-title\">\r\n            ready to order:\r\n          </h3>\r\n          <article className=\"order__pizza\">\r\n            <div className=\"order__pizza-pizza\">\r\n              {pizzas}\r\n            </div>\r\n            <p className=\"order__total-price\">\r\n              Total Price: $ \r\n              <span>{this.state.totalPrice}</span>\r\n            </p>\r\n            <div className=\"order__more\">\r\n              <Link to=\"/pizza-types\">\r\n                order more pizzas\r\n              </Link>\r\n            </div>\r\n            <div className=\"order__form\">\r\n              <h4 className=\"order__form-title\">\r\n                enter your order info\r\n              </h4>\r\n              <Form\r\n                formCustomClassname=\"order\"\r\n                formButtonText={this.props.isAuthenticated ? \"order now\" : \"sign up to order\"}\r\n                submitBtnDisabled={inputsDisplayed === null ? true : this.state.formIsValid}\r\n                submitForm={this.formSubmitHandler}>\r\n                  {inputsDisplayed}\r\n              </Form>\r\n            </div>\r\n          </article>\r\n        </section>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nconst mapStateToProps = state => {\r\n  return {\r\n    pizzaTypes: state.pizzaTypes.pizzaTypes,\r\n    orderStore: state.pizzaTypes.orderStore,\r\n    isAuthenticated: state.authenticate.token !== null,\r\n    orderSuccess: state.pizzaTypes.orderSuccess,\r\n    error: state.pizzaTypes.error\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = dispatch => {\r\n  return {\r\n    onRemovePizzaFromOrderStore: (pizza) => dispatch(actions.removePizzaFromOrderStore(pizza)),\r\n    onOrderPizzas: (orderData) => dispatch(actions.orderPizzas(orderData)),\r\n    onOrderClearError: () => dispatch(actions.orderPizzasClearError())\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Order);\r\n","import React from 'react';\r\nimport './form.scss';\r\n\r\nconst form = props => {\r\n  return (\r\n    <form \r\n      className={`form form__${props.formCustomClassname}`}\r\n      onSubmit={props.submitForm}>\r\n      {props.children}\r\n      <button \r\n        className=\"form__button\"\r\n        disabled={!props.submitBtnDisabled}>\r\n        {props.formButtonText}\r\n      </button>\r\n    </form>\r\n  )\r\n}\r\n\r\nexport default form\r\n","import React from 'react';\r\nimport './input.scss';\r\n\r\nconst input = props => {\r\n  let input = null;\r\n\r\n  let inputClasses = [\"form-input\"];\r\n\r\n  if(props.validationRequired && props.touched && !props.valid) {\r\n    inputClasses.push(\"input-invalid\");\r\n  }\r\n  if(props.valid) {\r\n    inputClasses.push(\"input-valid\");\r\n  }\r\n  switch(props.elementType) {\r\n    case(\"input\"):\r\n      input = <input\r\n        className={inputClasses.join(\" \")}\r\n        {...props.elementConfig}\r\n        value={props.value}\r\n        onChange={props.inputChanged} />;\r\n      break;\r\n    case(\"select\"):\r\n      input = (\r\n        <select\r\n          value={props.value}\r\n          className={inputClasses.join(\" \")}\r\n          name={props.elementConfig.name}\r\n          onChange={props.inputChanged}>\r\n            {props.elementConfig.options.map(option => (\r\n              <option\r\n                key={option.value}\r\n                value={option.value}>\r\n                {option.displayedValue}\r\n              </option>\r\n            ))}\r\n        </select>\r\n      );\r\n      break;\r\n    case(\"textarea\"):\r\n      input = (\r\n        <textarea\r\n          className={inputClasses.join(\" \")}\r\n          {...props.elementConfig}\r\n          value={props.value}\r\n          onChange={props.inputChanged}>\r\n\r\n        </textarea>\r\n      );\r\n      break;\r\n    default:\r\n      input = <input />;\r\n  }\r\n  return (\r\n    <div className=\"input-container\">\r\n      {props.label ? <label className=\"input-label\">{props.label}</label> : null}\r\n      {input}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default input;\r\n","import React from 'react';\r\nimport './error-modal.scss';\r\n\r\nconst errorModal = props => {\r\n  return (\r\n    <div \r\n      className={props.errorShow ? \"error-modal error-show\" : \"error-modal\"}>\r\n      <p className=\"error-modal__text\">\r\n        {props.children}\r\n      </p>\r\n      <button \r\n        className=\"error-modal__btn\"\r\n        onClick={props.errorClicked}>\r\n        OK\r\n      </button>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default errorModal;\r\n"],"sourceRoot":""}