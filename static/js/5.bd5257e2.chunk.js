(this["webpackJsonppizza-react-redux"]=this["webpackJsonppizza-react-redux"]||[]).push([[5],{102:function(e,t,r){},110:function(e,t,r){"use strict";r.r(t);var a=r(23),i=r(2),n=r(28),s=r(15),c=r(16),o=r(19),l=r(18),d=r(1),p=r.n(d),u=(r(102),r(17)),m=r(14),z=r(5),j=r(6),h=r(7),b=r(90),f=r(92),O=r(32),v=r(0),x=function(e){Object(o.a)(r,e);var t=Object(l.a)(r);function r(){var e;Object(s.a)(this,r);for(var c=arguments.length,o=new Array(c),l=0;l<c;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={modalOpen:!1,currentPizzaSizes:[],currentPizzaPrices:[],totalPrice:0,orderForm:{name:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Name"},validation:{required:!0},touched:!1,value:""},street:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Street"},validation:{required:!0},touched:!1,value:""},phone:{elementType:"input",elementConfig:{type:"text",placeholder:"Your Phone Number"},validation:{required:!0},touched:!1,value:""}},formIsValid:!1},e.pizzaSizeChangedHandler=function(t,r){var a=Object(n.a)(e.state.currentPizzaPrices),i=Object(n.a)(e.state.currentPizzaSizes);"32"===t.target.value?(a[r]=e.props.orderStore[r].prices[0].price,i[r]=e.props.orderStore[r].prices[0].size):"42"===t.target.value?(a[r]=e.props.orderStore[r].prices[1].price,i[r]=e.props.orderStore[r].prices[1].size):"50"===t.target.value&&(a[r]=e.props.orderStore[r].prices[2].price,i[r]=e.props.orderStore[r].prices[2].size);var s=a.reduce((function(e,t){return e+t}),0);e.setState({currentPizzaPrices:a,totalPrice:s})},e.removePizzaFromOrderStoreHandler=function(t,r){e.props.onRemovePizzaFromOrderStore(t);var a=Object(n.a)(e.state.currentPizzaPrices),i=a.find((function(e,t){return t===r})),s=a.filter((function(e,t){return t!==r}));e.setState((function(e){return{totalPrice:e.totalPrice-i,currentPizzaPrices:s}}))},e.checkInputValidity=function(e,t){var r=!0;if(e.required&&(r=""!==t.trim()&&r),e.minLength&&(r=t.length>=e.minLength&&r),e.isEmail){r=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(t)&&r}return r},e.inputChangedHandler=function(t,r){var n=Object(i.a)(Object(i.a)({},e.state.orderForm),{},Object(a.a)({},r,Object(i.a)(Object(i.a)({},e.state.orderForm[r]),{},{touched:!0,value:t.target.value,valid:e.checkInputValidity(e.state.orderForm[r].validation,t.target.value)}))),s=!0;for(var c in n)s=n[c].valid&&s;e.setState({orderForm:n,formIsValid:s})},e.formSubmitHandler=function(t){t.preventDefault(),e.props.isAuthenticated?e.setState({modalOpen:!0}):e.props.history.replace("/sign-up")},e.closeModalHandler=function(){e.setState({modalOpen:!1})},e.orderPizzasHandler=function(){var t={pizzas:{}};e.props.orderStore.forEach((function(r,a){t.pizzas[r.name]={name:r.name,size:e.state.currentPizzaSizes[a],price:e.state.currentPizzaPrices[a]}})),t.customerInfo={name:e.state.orderForm.name.value,street:e.state.orderForm.street.value,phone:e.state.orderForm.phone.value},t.totalPrice=e.state.totalPrice,e.props.onOrderPizzas(t),e.closeModalHandler(),console.log(t)},e}return Object(c.a)(r,[{key:"componentDidMount",value:function(){var e=this.props.orderStore.map((function(e){return e.prices[0].price})),t=this.props.orderStore.map((function(e){return e.prices[0].size})),r=e.reduce((function(e,t){return e+t}),0);this.setState({currentPizzaPrices:e,currentPizzaSizes:t,totalPrice:r})}},{key:"render",value:function(){var e=this,t=null;0===this.props.orderStore.length&&(t=Object(v.jsx)(z.a,{to:"/"}));var r=Object(v.jsx)("p",{children:"No orders yet"});this.props.orderStore.length>0&&(r=this.props.orderStore.map((function(t,r){return Object(v.jsxs)("div",{className:"pizza-display",children:[Object(v.jsx)("div",{className:"pizza-display__remove",onClick:function(){return e.removePizzaFromOrderStoreHandler(t,r)},children:Object(v.jsx)(h.e,{})}),Object(v.jsx)("div",{className:"pizza-display__img",children:Object(v.jsx)("img",{src:t.imageUrl,alt:t.name})}),Object(v.jsx)("p",{className:"pizza-display__name",children:t.name}),Object(v.jsxs)("div",{className:"pizza-display__flex",children:[Object(v.jsxs)("div",{className:"pizza-display__info",children:[Object(v.jsx)("p",{className:"pizza-display__ing-title",children:"ingredients:"}),Object(v.jsx)("ul",{className:"pizza-display__ingredients",children:t.ingredients.map((function(e,t){return Object(v.jsx)("li",{className:"pizza-display__ing",children:e},t)}))})]}),Object(v.jsxs)("div",{className:"pizza-display__pricing",children:[Object(v.jsx)("label",{htmlFor:"size",children:"pizza size:"}),Object(v.jsx)("select",{name:"size",id:"size",onChange:function(t){return e.pizzaSizeChangedHandler(t,r)},children:t.prices.map((function(e){return Object(v.jsx)("option",{value:e.size,children:e.size},e.size)}))}),Object(v.jsxs)("p",{className:"pizza-display__price-text",children:["pizza price: $",Object(v.jsx)("span",{className:"price",children:e.state.currentPizzaPrices[r]})]})]})]})]},t.id)})));var a=[];for(var i in this.state.orderForm)a.push({id:i,details:this.state.orderForm[i]});return Object(v.jsxs)(p.a.Fragment,{children:[t,Object(v.jsx)("div",{className:"order__finished",style:{display:this.props.orderSuccess?"block":"none"},children:"Your order have been successfull! See you in no time!"}),Object(v.jsxs)(O.a,{modalOpen:this.state.modalOpen,closeModal:this.closeModalHandler,cancelled:this.closeModalHandler,continued:this.orderPizzasHandler,children:[Object(v.jsx)("h2",{style:{marginBottom:"1.5rem"},children:"You ordered:"}),Object(v.jsx)("ol",{style:{textAlign:"left",padding:"0 1rem"},children:this.props.orderStore.map((function(t,r){return Object(v.jsxs)("li",{style:{marginBottom:"1rem"},children:[Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:"Pizza name: "}),Object(v.jsx)("span",{style:{textTransform:"capitalize"},children:t.name})]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:"size: "}),Object(v.jsxs)("span",{children:[e.state.currentPizzaSizes[r],"cm"]})]}),Object(v.jsxs)("p",{children:[Object(v.jsx)("span",{style:{fontWeight:"bold"},children:"price: "}),Object(v.jsxs)("span",{children:["$",e.state.currentPizzaPrices[r]]})]})]},t.id)}))}),Object(v.jsxs)("p",{children:["Total price: $",this.state.totalPrice]})]}),Object(v.jsx)("h1",{className:"order__title",children:"order your pizza"}),Object(v.jsxs)("section",{className:"order__content",children:[Object(v.jsx)("h3",{className:"order__pizza-title",children:"ready to order:"}),Object(v.jsxs)("article",{className:"order__pizza",children:[Object(v.jsx)("div",{className:"order__pizza-pizza",children:r}),Object(v.jsxs)("p",{className:"order__total-price",children:["Total Price: $",Object(v.jsx)("span",{children:this.state.totalPrice})]}),Object(v.jsx)("div",{className:"order__more",children:Object(v.jsx)(j.b,{to:"/pizza-types",children:"order more pizzas"})}),Object(v.jsxs)("div",{className:"order__form",children:[Object(v.jsx)("h4",{className:"order__form-title",children:"enter your order info"}),Object(v.jsx)(b.a,{formCustomClassname:"order",formButtonText:this.props.isAuthenticated?"order now":"sign up to order",submitBtnDisabled:this.state.formIsValid,submitForm:this.formSubmitHandler,children:a.map((function(t){return Object(v.jsx)(f.a,{elementType:t.details.elementType,elementConfig:t.details.elementConfig,value:t.details.value,touched:t.details.touched,validationRequired:t.details.validation,valid:t.details.valid,inputChanged:function(r){return e.inputChangedHandler(r,t.id)}},t.id)}))})]})]})]})]})}}]),r}(d.Component);t.default=Object(u.b)((function(e){return{pizzaTypes:e.pizzaTypes.pizzaTypes,orderStore:e.pizzaTypes.orderStore,isAuthenticated:null!==e.authenticate.token,orderSuccess:e.pizzaTypes.orderSuccess}}),(function(e){return{onRemovePizzaFromOrderStore:function(t){return e(m.q(t))},onOrderPizzas:function(t){return e(m.o(t))}}}))(x)},90:function(e,t,r){"use strict";r(1),r(91);var a=r(0);t.a=function(e){return Object(a.jsxs)("form",{className:"form form__".concat(e.formCustomClassname),onSubmit:e.submitForm,children:[e.children,Object(a.jsx)("button",{className:"form__button",disabled:!e.submitBtnDisabled,children:e.formButtonText})]})}},91:function(e,t,r){},92:function(e,t,r){"use strict";var a=r(2),i=(r(1),r(93),r(0));t.a=function(e){var t=null,r=["form-input"];switch(e.validationRequired&&e.touched&&!e.valid&&r.push("input-invalid"),e.valid&&r.push("input-valid"),e.elementType){case"input":t=Object(i.jsx)("input",Object(a.a)(Object(a.a)({className:r.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;case"select":t=Object(i.jsx)("select",{value:e.value,className:r.join(" "),name:e.elementConfig.name,onChange:e.inputChanged,children:e.elementConfig.options.map((function(e){return Object(i.jsx)("option",{value:e.value,children:e.displayedValue},e.value)}))});break;case"textarea":t=Object(i.jsx)("textarea",Object(a.a)(Object(a.a)({className:r.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;default:t=Object(i.jsx)("input",{})}return Object(i.jsxs)("div",{className:"input-container",children:[e.label?Object(i.jsx)("label",{className:"input-label",children:e.label}):null,t]})}},93:function(e,t,r){}}]);
//# sourceMappingURL=5.bd5257e2.chunk.js.map