(this["webpackJsonppizza-react-redux"]=this["webpackJsonppizza-react-redux"]||[]).push([[6],{109:function(e,t,n){},114:function(e,t,n){"use strict";n.r(t);var i=n(23),r=n(2),a=n(15),o=n(16),s=n(19),c=n(18),l=n(1),u=n.n(l),h=(n(109),n(90)),d=n(92),p=n(17),m=n(14),b=n(94),g=n(0),j=function(e){Object(s.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(a.a)(this,n);for(var o=arguments.length,s=new Array(o),c=0;c<o;c++)s[c]=arguments[c];return(e=t.call.apply(t,[this].concat(s))).state={signUpForm:{email:{elementType:"input",elementConfig:{type:"email",placeholder:"Your Email"},value:"",validation:{required:!0,isEmail:!0},valid:!1,touched:!1},password:{elementType:"input",elementConfig:{type:"password",placeholder:"Create Password"},value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1}},formIsValid:!1,checkInMethod:"signup",errorShow:!1},e.checkInputValidity=function(e,t){var n=!0;if(e.required&&(n=""!==t.trim()&&n),e.minLength&&(n=t.length>=e.minLength&&n),e.isEmail){n=/[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/.test(t)&&n}return n},e.inputChangedHandler=function(t,n){var a=Object(r.a)(Object(r.a)({},e.state.signUpForm),{},Object(i.a)({},n,Object(r.a)(Object(r.a)({},e.state.signUpForm[n]),{},{value:t.target.value,valid:e.checkInputValidity(e.state.signUpForm[n].validation,t.target.value),touched:!0}))),o=!0;for(var s in a)o=a[s].valid&&o;e.setState({signUpForm:a,formIsValid:o})},e.switchCheckinMethodHandler=function(t){"signup"===t?e.setState({checkInMethod:"login"}):"login"===t&&e.setState({checkInMethod:"signup"})},e.formSubmitHandler=function(t,n){t.preventDefault(),e.props.onAuthenticate(n.email.value,n.password.value,e.state.checkInMethod)},e}return Object(o.a)(n,[{key:"componentDidUpdate",value:function(){0===this.props.orderStore.length&&this.props.pizzaMakerPrice<4.2&&this.props.isAuthenticated&&!this.props.error&&this.props.authDone&&this.props.history.push("/"),this.props.isAuthenticated&&this.props.orderStore.length>0&&!this.props.error&&this.props.authDone&&this.props.history.push("/order"),this.props.isAuthenticated&&0===this.props.orderStore.length&&this.props.pizzaMakerPrice>4.2&&this.props.authDone&&!this.props.error&&this.props.history.push("/pizza-maker")}},{key:"render",value:function(){var e=this,t=[];for(var n in this.state.signUpForm)t.push({id:n,details:this.state.signUpForm[n]});var i=Object(g.jsx)(h.a,{formCustomClassname:"signup",formButtonText:"signup"===this.state.checkInMethod?"sign up":"log in",submitBtnDisabled:this.state.formIsValid,submitForm:function(t){return e.formSubmitHandler(t,e.state.signUpForm)},children:t.map((function(t){return Object(g.jsx)(d.a,{elementType:t.details.elementType,elementConfig:t.details.elementConfig,value:t.details.value,touched:t.details.touched,validationRequired:t.details.validation,valid:t.details.valid,inputChanged:function(n){return e.inputChangedHandler(n,t.id)}},t.id)}))}),r=Object(g.jsxs)(u.a.Fragment,{children:[Object(g.jsx)(b.a,{errorShow:this.props.error,errorClicked:this.props.onAuthClearError,children:"signup"===this.state.checkInMethod?"Sign up failed. Email may already exist. Try another one.":"Incorrect email or password"}),Object(g.jsx)("h1",{className:"checkin__title",children:"signup"===this.state.checkInMethod?"sign up":"log in"}),Object(g.jsxs)("section",{className:"checkin__content",children:[Object(g.jsx)("p",{className:"checkin__content-info",children:"In order to be able to order pizzas you need to create account on our page. Enter your contact info in order to proceed."}),i,Object(g.jsxs)("div",{className:"checkin__switch",children:[Object(g.jsx)("p",{className:"checkin__switch-text",style:{display:"signup"===this.state.checkInMethod?"block":"none"},children:"Already have an account?"}),Object(g.jsxs)("button",{className:"checkin__switch-btn",onClick:function(){return e.switchCheckinMethodHandler(e.state.checkInMethod)},children:["switch to ","signup"===this.state.checkInMethod?"log in":"sign up"]})]})]})]});return this.props.isAuthenticated&&(r=Object(g.jsxs)(u.a.Fragment,{children:[Object(g.jsx)("p",{style:{fontSize:"3rem",textAlign:"center",padding:"5rem"},children:"You are allready logged in"}),Object(g.jsx)("button",{onClick:this.props.onLogout,style:{fontSize:"2rem",width:"10rem",margin:"0 auto 2rem auto",backgroundColor:"#eee",textAlign:"center",padding:"0.5rem 1rem",display:"block",border:"none",outline:"none",cursor:"pointer"},children:"log out"})]})),r}}]),n}(l.Component);t.default=Object(p.b)((function(e){return{isAuthenticated:null!==e.authenticate.token,orderStore:e.pizzaTypes.orderStore,pizzaMakerPrice:e.pizzaMaker.currentPrice,error:e.authenticate.error,authDone:e.authenticate.authDone}}),(function(e){return{onAuthenticate:function(t,n,i){return e(m.f(t,n,i))},onLogout:function(){return e(m.e())},onAuthClearError:function(){return e(m.d())}}}))(j)},90:function(e,t,n){"use strict";n(1),n(91);var i=n(0);t.a=function(e){return Object(i.jsxs)("form",{className:"form form__".concat(e.formCustomClassname),onSubmit:e.submitForm,children:[e.children,Object(i.jsx)("button",{className:"form__button",disabled:!e.submitBtnDisabled,children:e.formButtonText})]})}},91:function(e,t,n){},92:function(e,t,n){"use strict";var i=n(2),r=(n(1),n(93),n(0));t.a=function(e){var t=null,n=["form-input"];switch(e.validationRequired&&e.touched&&!e.valid&&n.push("input-invalid"),e.valid&&n.push("input-valid"),e.elementType){case"input":t=Object(r.jsx)("input",Object(i.a)(Object(i.a)({className:n.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;case"select":t=Object(r.jsx)("select",{value:e.value,className:n.join(" "),name:e.elementConfig.name,onChange:e.inputChanged,children:e.elementConfig.options.map((function(e){return Object(r.jsx)("option",{value:e.value,children:e.displayedValue},e.value)}))});break;case"textarea":t=Object(r.jsx)("textarea",Object(i.a)(Object(i.a)({className:n.join(" ")},e.elementConfig),{},{value:e.value,onChange:e.inputChanged}));break;default:t=Object(r.jsx)("input",{})}return Object(r.jsxs)("div",{className:"input-container",children:[e.label?Object(r.jsx)("label",{className:"input-label",children:e.label}):null,t]})}},93:function(e,t,n){},94:function(e,t,n){"use strict";n(1),n(95);var i=n(0);t.a=function(e){return Object(i.jsxs)("div",{className:e.errorShow?"error-modal error-show":"error-modal",children:[Object(i.jsx)("p",{className:"error-modal__text",children:e.children}),Object(i.jsx)("button",{className:"error-modal__btn",onClick:e.errorClicked,children:"OK"})]})}},95:function(e,t,n){}}]);
//# sourceMappingURL=6.2a3100cc.chunk.js.map